"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{5990:function(t,e,n){function o(){let t=new Date(new Date().getTime()+324e5),e=t.getUTCFullYear(),n=String(t.getUTCMonth()+1).padStart(2,"0"),o=String(t.getUTCDate()).padStart(2,"0");return"".concat(e).concat(n).concat(o)}function r(t){let e=o(),n="mission_progress_".concat(t,"_").concat(e),r=localStorage.getItem(n);return r?parseInt(r,10):0}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=o(),i="mission_progress_".concat(t,"_").concat(n),c=r(t)+e;return localStorage.setItem(i,c.toString()),c}function c(t){let e=o(),n="mission_progress_".concat(t,"_").concat(e);localStorage.setItem(n,"0")}async function a(t){let e=o(),n="mission_checkin_".concat(e);"true"!==localStorage.getItem(n)&&(localStorage.setItem(n,"true"),await f(10,"출석체크 미션 완료",t))}async function s(){let t=i("post");if(await f(10,"글 작성"),t>=3){let t=o();localStorage.setItem("mission_completed_post_".concat(t),"true"),await f(30,"글 3개 작성 미션 완료")}}async function l(){let t=i("comment");if(await f(3,"댓글 작성"),t>=5){let t=o();localStorage.setItem("mission_completed_comment_".concat(t),"true"),await f(10,"댓글 5회 작성 미션 완료")}}async function u(){if(i("like")>=10){let t=o();localStorage.setItem("mission_completed_like_".concat(t),"true"),await f(10,"좋아요 10개 미션 완료")}}async function d(){let t=o(),e="mission_share_".concat(t);"true"!==localStorage.getItem(e)&&(localStorage.setItem(e,"true"),await f(10,"사이트 공유 미션 완료"))}async function f(t,e,o){try{let r=o;if(!r){for(let t of Object.keys(localStorage))if(t.startsWith("dori_profile_")){r=t.replace("dori_profile_","");break}}if(!r){console.warn("사용자 이메일을 찾을 수 없어 경험치를 저장할 수 없습니다."),window.dispatchEvent(new CustomEvent("missionUpdate")),window.dispatchEvent(new CustomEvent("doriExpAdded",{detail:{exp:t,reason:e}})),window.dispatchEvent(new CustomEvent("profileUpdated"));return}let i="dori_profile_".concat(r),c=localStorage.getItem(i);if(c)try{let e=JSON.parse(c),o={...e,doriExp:(e.doriExp||0)+t},{calculateTier:r,calculateLevel:a}=n(9460);o.tier=r(o.doriExp),o.level=a(10*o.doriExp),localStorage.setItem(i,JSON.stringify(o))}catch(t){console.error("프로필 업데이트 오류:",t)}else{let e="dori_mission_exp_".concat(r),n=parseInt(localStorage.getItem(e)||"0",10);localStorage.setItem(e,(n+t).toString())}window.dispatchEvent(new CustomEvent("missionUpdate")),window.dispatchEvent(new CustomEvent("doriExpAdded",{detail:{exp:t,reason:e}})),window.dispatchEvent(new CustomEvent("profileUpdated"))}catch(t){console.error("DORI EXP 적립 오류:",t)}}async function p(t,e){try{window.dispatchEvent(new CustomEvent("pointsAdded",{detail:{points:t,reason:e}})),window.dispatchEvent(new CustomEvent("profileUpdated"))}catch(t){console.error("포인트 적립 오류:",t)}}n.r(e),n.d(e,{addPoints:function(){return p},getMissionProgress:function(){return r},handleCheckinMission:function(){return a},handleCommentMission:function(){return l},handleLikeMission:function(){return u},handlePostMission:function(){return s},handleShareMission:function(){return d},incrementMissionProgress:function(){return i},resetMissionProgress:function(){return c}})},9460:function(t,e,n){n.r(e),n.d(e,{ACTIVITY_SCORES:function(){return m},TIER_INFO:function(){return o},TIER_THRESHOLDS:function(){return r},calculateActivityScore:function(){return f},calculateLevel:function(){return a},calculateLevelProgress:function(){return d},calculateTier:function(){return c},createDefaultProfile:function(){return p},getCurrentLevelStartExp:function(){return u},getNextLevelExp:function(){return l},getNextTierExp:function(){return i}});let o={1:{name:"Beginner",color:"#94a3b8",description:"초보자"},2:{name:"Explorer",color:"#60a5fa",description:"탐험가"},3:{name:"Contributor",color:"#34d399",description:"기여자"},4:{name:"Active Contributor",color:"#22c55e",description:"활발한 기여자"},5:{name:"Curator",color:"#a78bfa",description:"큐레이터"},6:{name:"Senior Curator",color:"#8b5cf6",description:"시니어 큐레이터"},7:{name:"Guide",color:"#f59e0b",description:"가이드"},8:{name:"Senior Guide",color:"#f97316",description:"시니어 가이드"},9:{name:"Architect",color:"#ec4899",description:"건축가"},10:{name:"Master Architect",color:"#f43f5e",description:"마스터 건축가"}},r={1:0,2:50,3:150,4:350,5:700,6:1500,7:3e3,8:5e3,9:8e3,10:12e3};function i(t,e){return t>=10?0:r[t+1]-e}function c(t){return t>=r[10]?10:t>=r[9]?9:t>=r[8]?8:t>=r[7]?7:t>=r[6]?6:t>=r[5]?5:t>=r[4]?4:t>=r[3]?3:t>=r[2]?2:1}function a(t){let e=1,n=0;for(;e<100&&t>=n;)if(t>=(n+=s(e)))e++;else break;return Math.min(e,100)}function s(t){return t<=1?50:t<=5?50+(t-1)*20:t<=10?100+(t-5)*30:t<=20?200+(t-10)*50:t<=50?600+(t-20)*100:t*t*20}function l(t){return t>=100?0:s(t)}function u(t){if(t<=1)return 0;let e=0;for(let n=1;n<t;n++)e+=s(n);return e}function d(t,e){if(e>=100)return 100;let n=u(e),o=l(e);return o<=0?100:Math.max(0,Math.min(100,Math.max(0,t-n)/o*100))}function f(t){return t.reduce((t,e)=>t+e.scoreDelta,0)}function p(t,e,n,o,r){return{id:e,email:e,nickname:n,gender:o,ageGroup:r,tier:1,level:1,doriExp:0,point:0,createdAt:new Date().toISOString()}}let m={post:10,comment:3,like:0,receivedLike:3,guide:20,report:-10}}}]);