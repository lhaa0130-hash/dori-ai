(()=>{var e={};e.id=204,e.ids=[204],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},67747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,originalPathname:()=>g,pages:()=>m,routeModule:()=>f,tree:()=>d}),r(50989),r(18532),r(35866);var i=r(23191),a=r(88716),o=r(37922),n=r.n(o),s=r(95231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let d=["",{children:["my",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,50989)),"C:\\Users\\infid\\Desktop\\Dori-ai\\app\\my\\edit\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,18532)),"C:\\Users\\infid\\Desktop\\Dori-ai\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],m=["C:\\Users\\infid\\Desktop\\Dori-ai\\app\\my\\edit\\page.tsx"],g="/my/edit/page",c={require:r,loadChunk:()=>Promise.resolve()},f=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/my/edit/page",pathname:"/my/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},18662:(e,t,r)=>{Promise.resolve().then(r.bind(r,76629))},76629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var i=r(10326),a=r(17577),o=r(77109),n=r(35047),s=r(14831),l=r(90775),d=r(14473);function m(){let{data:e,update:t}=(0,o.useSession)(),r=e?.user||null,{theme:m}=(0,s.F)(),g=(0,n.useRouter)(),[c,f]=(0,a.useState)(!1),[p,u]=(0,a.useState)(null),[x,h]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[S,k]=(0,a.useState)(void 0),[w,_]=(0,a.useState)(!1),z=async()=>{if(r?.email&&p){if(!x.trim()){alert("닉네임을 입력해주세요.");return}if(b.length>80){alert("한 줄 소개는 80자 이하여야 합니다.");return}if(v.length>20){alert("상태 메시지는 20자 이하여야 합니다.");return}_(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nickname:x.trim(),bio:b.trim(),statusMessage:v.trim(),profileImageUrl:S})});if(!e.ok){let t=await e.json();throw Error(t.error||"프로필 업데이트 실패")}let i={...p,nickname:x.trim(),bio:b.trim(),statusMessage:v.trim(),profileImageUrl:S};localStorage.setItem(`dori_profile_${r.email}`,JSON.stringify(i)),localStorage.setItem(`dori_user_name_${r.email}`,x.trim()),localStorage.setItem(`dori_user_bio_${r.email}`,b.trim()),localStorage.setItem(`dori_status_${r.email}`,v.trim()),S&&(localStorage.setItem(`dori_image_${r.email}`,S),window.dispatchEvent(new CustomEvent("profileImageUpdated",{detail:{imageUrl:S,email:r.email}}))),window.dispatchEvent(new CustomEvent("profileUpdated"));let a=JSON.parse(localStorage.getItem("dori_posts")||"[]").map(e=>((e.author===p.nickname||e.nickname===p.nickname||e.author===r?.name)&&(e.author=x.trim(),e.nickname=x.trim()),e.commentsList&&(e.commentsList=e.commentsList.map(e=>((e.author===p.nickname||e.author===r?.name)&&(e.author=x.trim()),e))),e));localStorage.setItem("dori_posts",JSON.stringify(a)),await t({name:x.trim()}),g.refresh(),_(!1),alert("프로필이 저장되었습니다."),g.push("/my")}catch(e){console.error("프로필 저장 오류:",e),_(!1),alert(e instanceof Error?e.message:"프로필 저장 중 오류가 발생했습니다.")}}},C=c&&"dark"===m;return c&&r?p?(0,i.jsxs)("main",{style:{backgroundColor:C?"#000000":"#ffffff",fontFamily:'"Pretendard", -apple-system, BlinkMacSystemFont, system-ui, "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "맑은 고딕", sans-serif',minHeight:"100vh",paddingTop:"70px",overflowY:"auto",position:"relative"},children:[i.jsx(l.default,{}),C&&(0,i.jsxs)("div",{className:"fixed inset-0 -z-10 pointer-events-none overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-[20%] w-[500px] h-[500px] rounded-full blur-[100px] opacity-40 bg-blue-900 mix-blend-screen animate-pulse"}),i.jsx("div",{className:"absolute top-[100px] right-[20%] w-[450px] h-[450px] rounded-full blur-[100px] opacity-40 bg-purple-900 mix-blend-screen animate-pulse",style:{animationDelay:"1s"}})]}),i.jsx("section",{className:"relative z-10",style:{maxWidth:"800px",margin:"0 auto",padding:"4rem 1.5rem 6rem 1.5rem",minHeight:"calc(100vh - 70px)"},children:(0,i.jsxs)("div",{style:{background:C?"rgba(255, 255, 255, 0.02)":"#ffffff",border:`1px solid ${C?"rgba(255, 255, 255, 0.1)":"#e5e5e7"}`,borderRadius:"1.5rem",padding:"3rem 2rem",boxShadow:C?"0 4px 20px rgba(0, 0, 0, 0.5)":"0 4px 20px rgba(0, 0, 0, 0.05)"},children:[i.jsx("h1",{style:{fontSize:"2rem",fontWeight:"800",color:C?"#ffffff":"#1d1d1f",marginBottom:"2rem"},children:"프로필 수정"}),(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.9375rem",fontWeight:"600",color:C?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)",marginBottom:"1rem"},children:"프로필 이미지"}),i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsx(d.Z,{currentImageUrl:S,onImageChange:e=>{k(e),r?.email&&window.dispatchEvent(new CustomEvent("profileImageUpdated",{detail:{imageUrl:e,email:r.email}}))}})})]}),(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.9375rem",fontWeight:"600",color:C?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)",marginBottom:"0.5rem"},children:"닉네임 *"}),i.jsx("input",{type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"닉네임을 입력하세요",maxLength:20,style:{width:"100%",padding:"0.875rem 1rem",borderRadius:"0.75rem",background:C?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${C?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,color:C?"#ffffff":"#1d1d1f",fontSize:"1rem",fontFamily:"inherit",outline:"none"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.9375rem",fontWeight:"600",color:C?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)",marginBottom:"0.5rem"},children:"한 줄 소개 (최대 80자)"}),i.jsx("textarea",{value:b,onChange:e=>y(e.target.value),placeholder:"자신을 소개하는 한 줄을 입력하세요",maxLength:80,rows:3,style:{width:"100%",padding:"0.875rem 1rem",borderRadius:"0.75rem",background:C?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${C?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,color:C?"#ffffff":"#1d1d1f",fontSize:"1rem",fontFamily:"inherit",resize:"vertical",outline:"none"}}),(0,i.jsxs)("div",{style:{fontSize:"0.8125rem",color:C?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",marginTop:"0.5rem",textAlign:"right"},children:[b.length,"/80"]})]}),(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[i.jsx("label",{style:{display:"block",fontSize:"0.9375rem",fontWeight:"600",color:C?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)",marginBottom:"0.5rem"},children:"상태 메시지 (최대 20자)"}),i.jsx("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"예: AI 실무 적용 중",maxLength:20,style:{width:"100%",padding:"0.875rem 1rem",borderRadius:"0.75rem",background:C?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)",border:`1px solid ${C?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,color:C?"#ffffff":"#1d1d1f",fontSize:"1rem",fontFamily:"inherit",outline:"none"}}),(0,i.jsxs)("div",{style:{fontSize:"0.8125rem",color:C?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",marginTop:"0.5rem",textAlign:"right"},children:[v.length,"/20"]})]}),(0,i.jsxs)("div",{style:{padding:"1.5rem",borderRadius:"0.75rem",background:C?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)",border:`1px solid ${C?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.08)"}`,marginBottom:"2rem"},children:[i.jsx("h3",{style:{fontSize:"0.9375rem",fontWeight:"600",color:C?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.5)",marginBottom:"1rem"},children:"수정 불가 항목"}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontSize:"0.8125rem",color:C?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",marginBottom:"0.25rem"},children:"이메일"}),i.jsx("div",{style:{fontSize:"0.9375rem",color:C?"#ffffff":"#1d1d1f",fontWeight:"500"},children:r.email})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontSize:"0.8125rem",color:C?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",marginBottom:"0.25rem"},children:"가입일"}),i.jsx("div",{style:{fontSize:"0.9375rem",color:C?"#ffffff":"#1d1d1f",fontWeight:"500"},children:new Date(p.createdAt).toLocaleDateString("ko-KR")})]}),(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontSize:"0.8125rem",color:C?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",marginBottom:"0.25rem"},children:"DORI EXP"}),(0,i.jsxs)("div",{style:{fontSize:"0.9375rem",color:C?"#ffffff":"#1d1d1f",fontWeight:"500"},children:[p.doriExp.toLocaleString(),"EXP"]})]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem",paddingTop:"2rem",borderTop:`1px solid ${C?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}`,position:"sticky",bottom:"1rem",background:C?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",zIndex:10},children:[i.jsx("button",{onClick:()=>g.back(),disabled:w,style:{padding:"0.875rem 1.5rem",borderRadius:"0.75rem",background:C?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",border:`1px solid ${C?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,color:C?"#ffffff":"#1d1d1f",cursor:w?"not-allowed":"pointer",fontSize:"0.9375rem",fontWeight:"600",fontFamily:"inherit",opacity:w?.5:1,transition:"all 0.2s"},onMouseEnter:e=>{w||(e.currentTarget.style.opacity="0.8",e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.opacity=w?"0.5":"1",e.currentTarget.style.transform="translateY(0)"},children:"취소"}),i.jsx("button",{onClick:z,disabled:w,style:{padding:"0.875rem 1.5rem",borderRadius:"0.75rem",background:C?"linear-gradient(135deg, #60a5fa, #a78bfa)":"linear-gradient(135deg, #2563eb, #7c3aed)",border:"none",color:"#ffffff",cursor:w?"not-allowed":"pointer",fontSize:"0.9375rem",fontWeight:"600",fontFamily:"inherit",opacity:w?.7:1,transition:"all 0.2s",boxShadow:w?"none":"0 4px 12px rgba(37, 99, 235, 0.3)"},onMouseEnter:e=>{w||(e.currentTarget.style.opacity="1",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(37, 99, 235, 0.4)")},onMouseLeave:e=>{e.currentTarget.style.opacity=w?"0.7":"1",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=w?"none":"0 4px 12px rgba(37, 99, 235, 0.3)"},children:w?"저장 중...":"저장하기"})]})]})})]}):(0,i.jsxs)("main",{style:{backgroundColor:C?"#000000":"#ffffff",minHeight:"100vh",paddingTop:"70px",display:"flex",alignItems:"center",justifyContent:"center"},children:[i.jsx(l.default,{}),i.jsx("div",{children:"로딩 중..."})]}):(0,i.jsxs)("main",{style:{backgroundColor:C?"#000000":"#ffffff",minHeight:"100vh",paddingTop:"70px",display:"flex",alignItems:"center",justifyContent:"center"},children:[i.jsx(l.default,{}),i.jsx("div",{style:{textAlign:"center"},children:i.jsx("p",{children:"로그인이 필요합니다."})})]})}r(89243)},50989:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`C:\Users\infid\Desktop\Dori-ai\app\my\edit\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,830,621,317,550],()=>r(67747));module.exports=i})();